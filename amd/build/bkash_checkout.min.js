define ("enrol_bkash/bkash_checkout",["jquery","core/ajax","core/config"],function(a,b,c){return{setup:function setup(b){var d,e=b.config.username,f=b.config.password,g=b.config.appkey,h=b.config.appsecretkey,i=b.amount,j=b.currency,k=b.courseid,l=b.userid,m=b.instanceid,n=b.item_name;a(document).ready(function(){a.ajax({url:c.wwwroot+"/enrol/bkash/token.php",type:"POST",contentType:"application/json",success:function success(a){console.log(a);console.log("got data from token  ..");console.log(JSON.stringify(a));JSON.stringify(a);token=a},error:function error(){console.log("error")}});var b={createCheckoutURL:c.wwwroot+"/enrol/bkash/createpayment.php",executeCheckoutURL:c.wwwroot+"/enrol/bkash/executepayment.php"},e;e={amount:"105",intent:"sale"};console.log(JSON.stringify(e));bKash.init({paymentMode:"checkout",paymentRequest:e,createRequest:function createRequest(c){console.log("=> createRequest (request) :: ");console.log(c);a.ajax({url:b.createCheckoutURL+"?amount="+e.amount+"&token="+token,type:"GET",contentType:"application/json",success:function success(a){console.log(a);console.log("got data from create  ..");console.log("data ::=>");console.log(JSON.stringify(a));var b=JSON.parse(a);if(a&&null!=b.paymentID){d=b.paymentID;bKash.create().onSuccess(b)}else{console.log("error");bKash.create().onError()}},error:function error(){console.log("error");bKash.create().onError()}})},executeRequestOnAuthorization:function executeRequestOnAuthorization(){console.log("=> executeRequestOnAuthorization");a.ajax({url:b.executeCheckoutURL+"?paymentID="+d+"&token="+token,type:"GET",contentType:"application/json",success:function success(a){console.log("got data from execute  ..");console.log("data ::=>");console.log(JSON.stringify(a));a=JSON.parse(a);if(a&&null!=a.paymentID){alert("[SUCCESS] data : "+JSON.stringify(a));window.location.href="success.html"}else{bKash.execute().onError()}},error:function error(){bKash.execute().onError()}})}});console.log("Right after init ")})}}});
//# sourceMappingURL=bkash_checkout.min.js.map
