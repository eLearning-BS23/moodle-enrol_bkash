define ("enrol_bkash/bkash_checkout",["jquery","core/ajax"],function(a,b){return{setup:function setup(c){var f,g=c.config.username;console.log(g);var h=c.config.password;console.log(h);var i=c.config.appkey;console.log(i);var j=c.config.appsecretkey;console.log(j);var k=c.amount,l=c.currency,m=c.courseid,n=c.userid,o=c.instanceid,p=c.item_name;console.log(l);console.log(k);console.log(m);console.log(n);console.log(o);console.log(p);a(document).ready(function(){d()});function d(){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/token/grant",headers:{username:g,password:h,"Content-Type":"application/json"},type:"POST",data:JSON.stringify({app_key:i,app_secret:j}),success:function success(a){var b={"Content-Type":"application/json",Authorization:a.id_token,"X-APP-Key":i};e(b,{amount:k,intent:"sale",currency:l,merchantInvoiceNumber:"123456"})},error:function error(a){console.log(a)}})}function e(c,d){bKash.init({paymentMode:"checkout",paymentRequest:d,createRequest:function createRequest(b){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/create",headers:c,type:"POST",contentType:"application/json",data:JSON.stringify(b),success:function success(a){if(a&&null!=a.paymentID){f=a.paymentID;bKash.create().onSuccess(a)}else{bKash.create().onError();alert(a.errorMessage+" Tag should be 2 digit, Length should be 2 digit, Value should be number of character mention in Length, ex. MI041234 , supported tags are MI, MW, RF")}},error:function error(){bKash.create().onError();alert(data.errorMessage)}})},executeRequestOnAuthorization:function executeRequestOnAuthorization(){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/execute"+"/"+f,headers:c,type:"POST",contentType:"application/json",success:function success(a){if(a&&null!=a.paymentID){var c={courseid:m,userid:n,payment_status:a.transactionStatus,txn_id:a.trxID,item_name:p,instanceid:o};b.call([{methodname:"enrol_bkash_bkash_enrolment_detail",args:c}])[0].done(function(a){console.log(a)}).fail(Notification.exception);myobject=JSON.stringify(a);alert("[SUCCESS] data : "+myobject);window.location.href="/success_page.html"}else{alert("[ERROR] data : "+JSON.stringify(a));bKash.execute().onError()}},error:function error(){alert("An alert has occurred during execute");bKash.execute().onError()}})},onClose:function onClose(){alert("User has clicked the close button")}})}}}});
//# sourceMappingURL=bkash_checkout.min.js.map
