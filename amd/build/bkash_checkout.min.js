define ("enrol_bkash/bkash_checkout",["jquery","core/ajax"],function(a,b){return{setup:function setup(b){var e,f=b.config.username,g=b.config.password,h=b.config.appkey,i=b.config.appsecretkey,j=b.amount,k=b.currency,l=b.courseid,m=b.userid,n=b.instanceid,o=b.item_name;a(document).ready(function(){c()});function c(){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/token/grant",headers:{username:f,password:g,"Content-Type":"application/json"},type:"POST",data:JSON.stringify({app_key:h,app_secret:i}),success:function success(a){var b={"Content-Type":"application/json",Authorization:a.id_token,"X-APP-Key":h};d(b,{amount:j,intent:"sale",currency:"BDT",merchantInvoiceNumber:"123456"})},error:function error(a){console.log(a)}})}function d(b,c){bKash.init({paymentMode:"checkout",paymentRequest:c,createRequest:function createRequest(c){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/create",headers:b,type:"POST",contentType:"application/json",data:JSON.stringify(c),success:function success(a){if(a&&null!=a.paymentID){e=a.paymentID;bKash.create().onSuccess(a)}else{bKash.create().onError();alert(a.errorMessage+" Tag should be 2 digit, Length should be 2 digit, Value should be number of character mention in Length, ex. MI041234 , supported tags are MI, MW, RF")}},error:function error(){bKash.create().onError();alert(data.errorMessage)}})},executeRequestOnAuthorization:function executeRequestOnAuthorization(){a.ajax({url:"https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/execute"+"/"+e,headers:b,type:"POST",contentType:"application/json",success:function success(a){if(a&&null!=a.paymentID){alert("[SUCCESS] data : "+JSON.stringify(a));window.location.href="/success_page.html"}else{alert("[ERROR] data : "+JSON.stringify(a));bKash.execute().onError()}},error:function error(){alert("An alert has occurred during execute");bKash.execute().onError()}})},onClose:function onClose(){alert("User has clicked the close button")}})}}}});
//# sourceMappingURL=bkash_checkout.min.js.map
