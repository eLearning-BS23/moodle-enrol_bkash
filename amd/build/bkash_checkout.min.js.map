{"version":3,"sources":["../src/bkash_checkout.js"],"names":["define","$","setup","bkash_information","paymentID","username","config","console","log","password","app_key","appkey","app_secret","appsecretkey","amount","currency","courseid","userid","document","ready","getAuthToken","ajax","url","headers","type","data","JSON","stringify","success","result","id_token","initBkash","error","request","bKash","init","paymentMode","paymentRequest","createRequest","contentType","create","onSuccess","onError","alert","errorMessage","executeRequestOnAuthorization","myobject","window","location","href","execute","onClose"],"mappings":"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","sourcesContent":["define(['jquery'], function ($)\n{\n\n    return {\n        setup: function(bkash_information) {\n\n\n    var paymentID;\n\n    var username = bkash_information.config.username;\n        console.log(username);\n\n    var password = bkash_information.config.password;\n        console.log(password);\n\n    var app_key = bkash_information.config.appkey;\n        console.log(app_key);\n\n    var app_secret = bkash_information.config.appsecretkey;\n        console.log(app_secret);\n\n    var amount = bkash_information.amount;\n    var currency = bkash_information.currency;\n    var courseid = bkash_information.courseid;\n    var userid = bkash_information.userid;\n\n        console.log(currency);\n        console.log(amount);\n        console.log(courseid);\n        console.log(userid);\n\n    var grantTokenUrl = 'https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/token/grant';\n    var createCheckoutUrl = 'https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/create';\n    var executeCheckoutUrl = 'https://checkout.sandbox.bka.sh/v1.2.0-beta/checkout/payment/execute';\n\n    $(document).ready(function () {\n        getAuthToken();\n    });\n\n    function getAuthToken() {\n        let body = {\n            \"app_key\": app_key,\n            \"app_secret\": app_secret\n        };\n\n        $.ajax({\n            url: grantTokenUrl,   // Sandbox checkout\n            headers: {\n                \"username\": username,\n                \"password\": password,\n                \"Content-Type\": \"application/json\"\n            },\n            type: 'POST',\n            data: JSON.stringify(body),   //JS obj to string covert\n            success: function (result) {\n\n                let headers = {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": result.id_token, // Contains access token\n                    \"X-APP-Key\": app_key\n                };\n\n                let request = {             //create payment API\n                    \"amount\": amount,\n                    \"intent\": \"sale\",\n                    \"currency\": currency,\n                    \"merchantInvoiceNumber\": \"123456\"\n                };\n\n                initBkash(headers, request);\n            },\n            error: function (error) {\n                console.log(error);\n            }\n        });\n    }\n\n    function initBkash(headers, request) {\n        bKash.init({\n            paymentMode: 'checkout',\n            paymentRequest: request,\n\n            createRequest: function (request) {\n                $.ajax({\n                    url: createCheckoutUrl,\n                    headers: headers,\n                    type: 'POST',\n                    contentType: 'application/json',\n                    data: JSON.stringify(request),\n                    success: function (data) {\n\n                        if (data && data.paymentID != null) {\n                            paymentID = data.paymentID;\n                            bKash.create().onSuccess(data);\n                        }\n                        else {\n                            bKash.create().onError(); // Run clean up code\n                            alert(data.errorMessage + \" Tag should be 2 digit, Length should be 2 digit, Value should be number of character mention in Length, ex. MI041234 , supported tags are MI, MW, RF\");\n                        }\n\n                    },\n                    error: function () {\n                        bKash.create().onError(); // Run clean up code\n                        alert(data.errorMessage);\n                    }\n                });\n            },\n            executeRequestOnAuthorization: function () {\n                $.ajax({\n                    url: executeCheckoutUrl + '/' + paymentID,\n                    headers: headers,\n                    type: 'POST',\n                    contentType: 'application/json',\n                    success: function (data) {\n\n                        if (data && data.paymentID != null) {\n                            // On success, perform your desired action\n                            console.log(data.paymentID);\n                            console.log(data.amount);\n                            console.log(data.currency);\n\n\n\n                            // $bkash_enrol =\n\n\n                            myobject = JSON.stringify(data);\n\n\n                            alert('[SUCCESS] data : ' + myobject);\n\n                            window.location.href = \"/success_page.html\";\n\n                        } else {\n                            alert('[ERROR] data : ' + JSON.stringify(data));\n                            bKash.execute().onError();//run clean up code\n                        }\n\n                    },\n                    error: function () {\n                        alert('An alert has occurred during execute');\n                        bKash.execute().onError(); // Run clean up code\n                    }\n                });\n            },\n            onClose: function () {\n                alert('User has clicked the close button');\n            }\n        });\n\n    }\n}\n\n}});\n"],"file":"bkash_checkout.min.js"}